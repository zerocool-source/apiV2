Replit prompt (paste into Replit AI Agent in the API v2 backend)

Paste this exactly:

Prompt:

Goal: Add Swagger-style API documentation (OpenAPI 3.0 + Swagger UI) to API v2 (Fastify + Prisma + JWT + Zod). Must work locally and on Render.

Context:

Backend is Fastify.

Routes already exist under /api (auth, technicians, assignments, properties, jobs, metrics, etc).

Validation uses Zod in route files.

Auth uses JWT Bearer tokens.

Requirements:

Dependencies

Install and use:

@fastify/swagger

@fastify/swagger-ui

If Zod schemas are used, integrate them into OpenAPI generation using ONE of:

fastify-type-provider-zod + zod-to-json-schema

OR manually define schema objects for routes that lack them
Prefer the cleanest approach that reuses existing Zod schemas.

Docs endpoints

Serve Swagger UI at GET /docs

Serve OpenAPI JSON at GET /docs/json (or /openapi.json)

In production (Render), /docs must still load.

Security

Add a global security scheme:

type: http

scheme: bearer

bearerFormat: JWT

Mark protected routes as requiring Bearer auth in docs.

Public routes (like POST /api/auth/login and GET /api/health) should be marked as public.

Tags + grouping

Group endpoints with tags:

Auth

Technicians

Supervisors (if present)

Assignments

Properties

Jobs

Metrics

Each route should have:

summary

description (short)

tags

request body schema (when applicable)

response schemas (at least 200/201 + common 401/403/404)

Examples (minimum)
Add example bodies for:

POST /api/auth/login

POST /api/assignments

PATCH /api/assignments/:id (including cancelled/canceled)

PATCH /api/technicians/:id

POST /api/technicians (admin create tech)

Config details

Use app version from package.json if available.

Set OpenAPI info.title = "Breakpoint API v2"

Set server URL dynamically based on request host or env BASE_URL if present.

Deliverables

Code compiles and npm run dev works.

Visiting /docs shows the full route list with schemas.

/docs/json returns valid OpenAPI JSON.

Also update replit.md with:

How to open docs locally

How to open docs on Render

Any env vars needed (if any)